<ion-header>
  <ion-toolbar>
    <ion-title>Popular TV Shows</ion-title>
    <ion-buttons slot="primary">
      <ion-searchbar [(ngModel)]="searchQuery" placeholder="Search for a TV show..."
        search-icon="search-circle"></ion-searchbar>
    </ion-buttons>
    <ion-buttons slot="secondary">
      <ion-button (click)="search()">
        <ion-icon name="search"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>  
  <ion-grid>
    <ion-row>
      <ion-col size="12">        
        <ion-select label="Select genres" [multiple]="true" [(ngModel)]="selectedGenres" (ionChange)="onGenreChange($event)">
          <ion-select-option *ngFor="let genre of genres" [value]="genre">{{ genre }}</ion-select-option>
        </ion-select>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="6" *ngFor="let tvShow of series" (click)="showDetails(tvShow.id)">
        <ion-card>
          <img src="{{ tvShow?.image?.medium }}" alt="{{ tvShow.name }}">
          <ion-card-header>
            <ion-card-title>{{ tvShow.name }}</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p>Rating: {{ tvShow?.rating?.average !== null ? tvShow?.rating?.average : 'N/A' }}</p>
            <p>Genre: {{ tvShow.genres.join(', ') }}</p>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- <ion-infinite-scroll threshold="100px" (ionInfinite)="loadMore($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>
  </ion-infinite-scroll> -->

</ion-content>